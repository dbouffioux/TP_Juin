DROP TABLE inscription;
DROP TABLE activity;
DROP TABLE event;
DROP TABLE person;

CREATE TABLE person (
	id SERIAL PRIMARY KEY,
	firstname VARCHAR(100) ,
	lastname VARCHAR(100) ,
	login VARCHAR NOT NULL UNIQUE ,
	password VARCHAR NOT NULL
);
 
CREATE TABLE event (
	id  SERIAL PRIMARY KEY ,
	name varchar(20) NOT NULL UNIQUE,
	person_id int NOT NULL,
	begin timestamp with time zone NOT NULL,
	finish timestamp with time zone NOT NULL
	CONSTRAINT FK_person_id REFERENCES person (id)
);

CREATE TABLE activity(
	id  SERIAL PRIMARY KEY ,
	name varchar(20) NOT NULL,
	begin timestamp with time zone NOT NULL,
	finish timestamp with time zone NOT NULL,
	url varchar,
	description varchar,
	event_id int NOT NULL
	CONSTRAINT FK_event_id REFERENCES event (id) ON DELETE CASCADE
);

CREATE TABLE inscription(
	id  SERIAL PRIMARY KEY ,
	person_id int NOT NULL
	CONSTRAINT FK_person_id REFERENCES person (id),
	activity_id int NOT NULL
	CONSTRAINT FK_activity_id REFERENCES activity (id) ON delete CASCADE
);